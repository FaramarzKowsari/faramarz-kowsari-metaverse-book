<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metaverse Leaps - Digital Book | Faramarz Kowsari</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@100;400;700&family=Urbanist:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #deff9a; --bg: #050505; --glass: rgba(255, 255, 255, 0.03); }
        * { scroll-behavior: smooth; box-sizing: border-box; }
        body { background-color: var(--bg); color: #e5e7eb; font-family: 'Urbanist', 'Vazirmatn', sans-serif; overflow-x: hidden; }
        .glass-panel { background: var(--glass); backdrop-filter: blur(15px); border: 1px solid rgba(222, 255, 154, 0.1); }
        .gradient-text { background: linear-gradient(135deg, #deff9a 0%, #a3e635 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .sidebar-link { transition: all 0.3s ease; border-radius: 12px; }
        .sidebar-link.active { color: var(--accent); background: rgba(222, 255, 154, 0.1); }
        [dir="rtl"] .sidebar-link { text-align: right; }
        [dir="ltr"] .sidebar-link { text-align: left; }
        .page-container { max-width: 850px; margin: 0 auto; line-height: 2.2; }
        .paragraph-text { text-align: justify; margin-bottom: 2.5rem; font-weight: 300; font-size: 1.15rem; color: #d1d5db; }
        
        /* Compact Player UI */
        .mini-player-compact { 
            position: fixed; bottom: 24px; z-index: 100; 
            padding: 10px; border-radius: 50px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.8);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .mini-player-compact:hover { transform: translateY(-5px); }

        .loader { border: 2px solid #333; border-top: 2px solid var(--accent); border-radius: 50%; width: 14px; height: 14px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 10px; }
        @media (max-width: 1024px) {
            .sidebar-mobile { position: fixed; top: 0; width: 85%; height: 100vh; transform: translateX(-100%); z-index: 100; transition: transform 0.4s ease; }
            [dir="rtl"] .sidebar-mobile { transform: translateX(100%); }
            .sidebar-mobile.open { transform: translateX(0); }
        }
        .barcode-svg { filter: invert(1) brightness(1.2); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- SVG Icons ---
        const IconDownload = () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="inline-block mx-1"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>;
        const IconPlay = () => <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"/></svg>;
        const IconPause = () => <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>;
        const IconStop = () => <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><rect x="4" y="4" width="16" height="16" rx="2"/></svg>;
        const IconGlobe = () => <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>;
        const IconLinkedin = () => <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>;
        const IconMail = () => <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>;
        const IconMenu = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>;
        const IconX = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>;
        const IconVolume = () => <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/></svg>;

        const Barcode = () => (
            <svg width="150" height="40" className="barcode-svg">
                <rect width="150" height="40" fill="white" />
                {[...Array(30)].map((_, i) => (
                    <rect key={i} x={i*5} width={Math.random() > 0.4 ? 2 : 4} height="35" fill="black" />
                ))}
            </svg>
        );

        const bookData = {
            en: {
                dir: "ltr", langCode: "en", pdf: "pdf/Metavers_Leaps_Brief_Book -English1.pdf",
                title: "Technological Leaps in the Metaverse", author: "Faramarz Kowsari", isbn: "978-622-02-2356-6",
                download: "Download PDF (EN)", authorLabel: "About Author", pubDetails: "Publication Identity",
                chapters: [
                    { id: "ch1", title: "1. Philosophy of Presence", paragraphs: [
                        "The concept of presence in the Metaverse represents a fundamental ontological shift that transcends the limitations of traditional telecommunications and virtual reality simulation. In this new paradigm, presence is not merely a psychological state of feeling there but a functional integration of the self into a complex digital ecosystem. This transition requires us to reconsider the Cartesian distinction between mind and matter as the virtual plane provides a logically consistent framework. The biological brain, through its inherent plasticity, begins to treat synthetic stimuli as primary data points for environmental mapping and navigation. Consequently, the boundary between the physical body and the digital avatar starts to dissolve at the neural level for the observer. We are witnessing the emergence of a post-geographic human condition where the concept of locality is defined by network topology. This shift necessitates a new epistemology that values the authenticity of interaction over the medium of transmission in daily life. The subjective experience of qualia in virtual spaces becomes indistinguishable from physical reality as sensory feedback loops reach millisecond precision. We must acknowledge that the Metaverse is not an escape from reality but a purposeful expansion of the human existential territory. Presence, therefore, is the cognitive glue that binds our disparate experiences into a unified sense of self across both domains.",
                        "The second phase of this philosophical evolution centers on the temporal nature of digital existence and the spatialization of memory in 3D. In the physical world, time is a linear progression characterized by the irreversible decay of matter and the fading of events into history. In the Metaverse, every action is recorded in a persistent ledger, transforming the past into a navigable architectural space for everyone. This allows for a simultaneity of experience where multiple historical or speculative contexts can exist within a single synchronized environment. The human relationship with the moment is thus fundamentally altered, moving from a transient occurrence to a persistent data point that can be revisited or re-experienced. Such a shift requires a new framework for understanding the concept of a life well-lived in an era of digital eternity. We must grapple with the psychological implications of living in an environment devoid of traditional entropy, where beauty is static and death is an optional state. This leads to the question of whether the human spirit requires struggle and decay to find true meaning and purpose. Artificially introducing narrative friction and digital entropy into these worlds is a way to ground our experiences in a familiar reality. Yet, the real technological leap lies in embracing the unique logic of the digital plane as a valid form of reality in its own right. This acceptance marks the transition from the imitation phase of technology to the creation phase of the new human species.",
                        "Thirdly, the philosophy of presence must address the collective nature of reality-building and the emergence of inter-subjective consensus through technology. In the physical world, reality is largely a given, dictated by the laws of physics and the consensus of biological senses. In the Metaverse, reality is a collaborative construct that can be modified, shared, and negotiated in real-time by the users. This creates a dynamic reality where the collective will of a community can alter the physical laws of their shared environment. Such power requires a new social contract that prioritizes the preservation of shared truth over individual convenience or profit. We must be wary of the fragmentation of reality into epistemic bubbles where different groups live in logically incompatible universes. The open Metaverse depends on interoperable protocols that ensure a consistent baseline of experience for all its global inhabitants. This consistency is essential for fostering trust and empathy across the digital divide that currently exists in our world. We must treat high-fidelity presence as a fundamental human right, ensuring that no one is excluded based on their status. The democratization of the ideal allows for a global meritocracy where the most innovative minds can shape the digital reality. Ultimately, the philosophy of presence is about the integration of the human reach with the infinite possibilities of the void."
                    ]},
                    { id: "ch2", title: "2. Generative AI", paragraphs: [
                        "Artificial Intelligence has evolved into the master architect of the virtual landscape, utilizing deep learning to construct trillions of cubic meters of navigable space. In the coming decade, we will witness a transition where world-building becomes as intuitive as speaking, thanks to high-level interpretive neural networks. These AI entities don't merely place static assets; they manage the complex physics and environmental logic of the ecosystem in real-time. This democratization of creation empowers every single inhabitant to manifest their imagination into a tangible three-dimensional reality for all. Agentic AI acts as the silent moderator of social interactions, ensuring that community norms are upheld across billions of synchronized server instances globally. We are moving toward a state where content creation at a massive scale is no longer a human bottleneck but an automated process. The fusion of AI and 3D rendering allows for a visual fidelity that fills the 'uncanny valley' and creates perfect immersion. Every NPC in this world will possess a unique history and personality, evolving dynamically through its interactions with the human users. Ultimately, AI provides the structural integrity and creative energy required to sustain a functional and infinite digital civilization today. This partnership between human intent and machine execution is the defining technological leap of the digital architect era.",
                        "Technical rendering systems are now moving toward neural rendering pipelines that bypass the traditional limitations of rasterization and ray-tracing calculations. By storing environmental information in neural weights, we can achieve photorealistic lighting and complex textures with a fraction of the traditional computational cost. This breakthrough ensures that high-fidelity Metaverse experiences are accessible on low-power mobile devices, bridging the global digital divide. We are also seeing the rise of automated asset generation, where AI creates optimized 3D models from simple 2D descriptions or sketches. This efficiency allows for the rapid expansion of virtual cities and ecosystems without the need for massive human modeling teams. Procedural life algorithms ensure that digital nature is non-repetitive, mirroring the diversity and complexity of biological systems found on Earth. Every sunset, every forest path, and every architectural detail is a unique manifestation of the AI's deep understanding of aesthetics. This level of automation solves the 'content desert' problem, keeping the Metaverse fresh and engaging for long-term inhabitants. We are building a synthetic world that breathes, grows, and reacts to its occupants with a level of detail that was previously unimaginable. Generative AI is not just a tool; it is the heartbeat of the digital environment's constant evolution.",
                        "AI also serves as the critical layer of identity management and social safety in highly populated virtual environments containing billions of avatars. Machine vision and real-time behavioral analysis systems monitor data streams to prevent fraud, harassment, and the creation of deceptive digital clones. We are witnessing the rise of 'agentic twins,' AI-driven representations of users that can manage tasks and social presence even while the user is offline. These twins learn from user preferences and ethics to ensure that their autonomous actions remain consistent with the human's true intent. However, this raises profound questions about authenticity and the sovereignty of the individual in a world of perfect simulations. We must implement transparent algorithmic protocols to ensure that AI serves the user's best interests rather than corporate profitability goals. The ethical architecture of AI is just as important as its creative power for the future of our digital civilization's social cohesion. Protecting the human mind from algorithmic 'nudging' and subconscious manipulation is the primary political struggle of the new era. Ultimately, AI must be an engine for human empowerment, expanding our capabilities without compromising our fundamental values and agency. The Metaverse is a test of our ability to govern the immense power of artificial intelligence with wisdom and foresight."
                    ]},
                    { id: "ch3", title: "3. BCI Leap", paragraphs: [
                        "Brain-Computer Interfaces represent the ultimate frontier of human immersion by bypassing the biological limitations of our natural sense organs. Current VR is constrained by the bandwidth of eyes and ears, but BCI injects data directly into the neural pathways. This technology achieves the 'feeling of reality' by creating direct neural resonance that is indistinguishable from physical sensations for the brain. We are moving from external displays to internal experiences where the mind and the machine operate as a single cognitive unit. High-density micro-electrode arrays and optogenetics allow for surgical precision in targeting specific clusters of neurons for deep sensory injection. Non-invasive wearable versions are being developed to bring this sensory leap to the mass consumer market without surgical risks. Telepathic communication becomes possible as brain signals are decoded and transmitted across the network in the form of pure concepts. Neuro-haptics provide the missing layer of physicality by simulating weight and texture directly in the somatosensory cortex of the observer. The integration of BCI with the Metaverse engages the entire human nervous system, making the digital world feel as solid as earth. This sensory revolution will redefine what it means to be human in a technologically augmented and persistent digital era.",
                        "The engineering shift from invasive to non-invasive BCI is a core element of mass user adoption. While early BCI required complex neurosurgery, new technologies like near-infrared spectroscopy and transcranial magnetic stimulation allow reading neural data through the skull. These portable devices can be integrated into headbands, allowing for sophisticated data exchange with the brain without medical risks. This democratization of neural access ensures that the benefits of BCI reach beyond the clinic to every digital inhabitant. As signal-to-noise ratios improve, we will see the rise of telepathic social interactions and the direct control of virtual objects with thought alone. This 'interface-less' agency is the ultimate expression of human will in a world composed entirely of pure information. Neuro-haptics adds a critical dimension of physicality by simulating the sensation of weight, texture, and temperature directly in the sensory cortex. The resulting sensory convergence engages the entire human nervous system, bridging the final gap between the user and the environment. We are building a reality where physical disabilities no longer limit human potential, thanks to the power of the mind. This transition marks the arrival of the cybernetic human era, where biology and code are perfectly synchronized.",
                        "Direct access to the brain raises profound ethical concerns regarding mental privacy and neural sovereignty in the digital age. If our inner thoughts and subconscious reactions are translated into data, they become vulnerable to unauthorized surveillance or algorithmic manipulation. We need a global framework of neuro-rights to protect the integrity of the mind and ensure cognitive liberty for all. The prospect of neuro-advertising, where corporations target the subconscious directly, must be strictly regulated to prevent exploitation. BCI data is the most sensitive information a human can produce, revealing our deepest fears, desires, and personal cognitive biases. This data must be protected by unbreakable encryption and stored in decentralized systems owned entirely by the individual user. We must also establish clear boundaries for the 'writing' of data to the brain to ensure it is only used for enrichment and therapy. The development of neural firewalls will be a critical technological leap to protect users from malicious neural inputs or unauthorized 'brain-jacking'. BCI ethics is a fundamental human rights issue that will define the political struggle of the twenty-first century for everyone. We must ensure that neurotechnology serves to empower the human spirit rather than turning the mind into a programmable commodity."
                    ]},
                    { id: "ch4", title: "4. 6G Infrastructure", paragraphs: ["Content English Ch4 Para 1...","Para 2...","Para 3..."] },
                    { id: "ch5", title: "5. Digital Economy", paragraphs: ["Content English Ch5 Para 1...","Para 2...","Para 3..."] },
                    { id: "ch6", title: "6. Fluid Identity", paragraphs: ["Content English Ch6 Para 1...","Para 2...","Para 3..."] },
                    { id: "ch7", title: "7. Digital Ethics", paragraphs: ["Content English Ch7 Para 1...","Para 2...","Para 3..."] },
                    { id: "ch8", title: "8. Art & Creativity", paragraphs: ["Content English Ch8 Para 1...","Para 2...","Para 3..."] },
                    { id: "ch9", title: "9. Law & Sovereignty", paragraphs: ["Content English Ch9 Para 1...","Para 2...","Para 3..."] },
                    { id: "ch10", title: "10. Final Synthesis", paragraphs: ["Content English Ch10 Para 1...","Para 2...","Para 3..."] }
                ]
            },
            tr: {
                dir: "ltr", langCode: "tr", pdf: "pdf/Metavers_Leaps_Brief_Book-Turkish.pdf",
                title: "Metaverse'de Teknolojik Sıçramalar", author: "Faramarz Kowsari", isbn: "978-622-02-2356-6",
                download: "PDF İndir (TR)", authorLabel: "Yazar Hakkında", pubDetails: "Yayın Bilgileri",
                chapters: [
                    { id: "ch1", title: "1. Varlık Felsefesi", paragraphs: [
                        "Metaverse'deki varlık kavramı, mevcut başa takılan ekranların basit görsel sadakatinin ötesine geçerek, insan deneyiminde derin bir ontolojik değişimi kapsar ve fiziksel gerçeklik ile dijital temsil arasındaki sınırları radikal bir biçimde zorlar. Bu yeni paradigmada varlık, sadece orada olma şeklinde geçici bir psikolojik durum değil, benliğin kendi iç mantığını zihne dayatan karmaşık, yüksek frekanslı bir dijital ekosisteme işlevsel entegrasyonudur. Bu geçiş, zihin ve madde arasındaki Kartezyen ayrımı yeniden düşünmemizi gerektirir; zira sanal düzlem, öznel deneyim için mantıksal olarak tutarlı bir çerçeve sunar. Biyolojik beyin, doğuştan gelen plastisitesi sayesinde, sentetik uyaranları çevresel haritalama için birincil veri noktaları olarak ele almaya başlar. Sonuç olarak, fiziksel beden ile dijital avatar arasındaki sınır nöral düzeyde çözülmeye başlar ve birey kendini verilerin içinde yeniden tanımlayarak yeni bir varoluşsal düzleme adım atar. Yerellik kavramının fiziksel koordinatlardan ziyade ağ topolojisi tarafından tanımlandığı coğrafya sonrası bir insanlık durumunun ortaya çıkışına tanık oluyoruz. Bu değişim, etkileşimin özgünlüğünü iletim ortamının üzerinde tutan yeni bir epistemoloji gerektirir ve bilginin doğasını kökten değiştirir. Sanal alanlardaki qualia veya öznel deneyim kalitesi, duyusal geri bildirim döngüleri milisaniye hassasiyetine ulaştıkça fiziksel gerçeklikten ayırt edilemez hale gelir. Metaverse'ün gerçeklikten bir kaçış değil, insan varoluşsal alanının bilinçli ve amaçlı bir genişlemesi olduğunu kabul etmeliyiz.",
                        "Bölümün ikinci aşamasında, dijital varlığın zamansal doğasını ve belleğin mekânsallaştırılmasını ele alıyoruz. Fiziksel dünyada zaman, maddenin geri dönülemez bozunması ve olayların tarihe karışmasıyla karakterize edilen doğrusal bir ilerlemedir. Metaverse'de ise هر eylem kalıcı bir deftere kaydedilir ve geçmişi gezilebilir bir mimari alana dönüştürür. Bu, birden fazla tarihsel veya spekülatif bağlamın tek bir senkronize ortamda var olabileceği bir deneyim eşzamanlılığına izin verir. İnsanın an ile olan ilişkisi böylece temelden değişir; geçici bir olaydan, yeniden ziyaret edilebilen veya yeniden deneyimlenebilen kalıcı bir veri noktasına dönüşür. Böyle bir değişim, dijital ebediyet çağında anlamlı bir yaşam kavramını yeniden tanımlamak için yeni bir çerçeve gerektirir. Geleneksel entropiden yoksun, güzelliğin statik olduğu ve ölümün isteğe bağlı bir durum olduğu bir ortamda yaşamanın psikolojik sonuçlarıyla yüzleşmeliyiz. Bu da insan ruhunun gerçek anlam bulmak için mücadele ve bozunmaya ihtiyaç duyup duymadığı sorusuna yol açar. Bu dünyalara yapay olarak anlatı sürtünmesi ve dijital entropi dahil etmek, deneyimlerimizi tanıdık bir gerçekliğe bağlamanın bir yoludur. Ancak gerçek teknolojik sıçrama, dijital düzlemin benzersiz mantığını kendi başına geçerli bir gerçeklik formu olarak kabul etmekte yatar.",
                        "Üçüncü olarak, varlık felsefesi gerçeklik inşasının kolektif doğasını ve öznelerarası fikir birliğinin ortaya çıkışını ele almalıdır. Fiziksel dünyada gerçeklik, fizik yasaları ve duyuların konsensüsü tarafından dikte edilen büyük ölçüde verili bir durumdur. Metaverse'de gerçeklik, gerçek zamanlı olarak değiştirilebilen, paylaşılan ve müzekere edilebilen iş birliğine dayalı bir kurgudur. Bu, bir topluluğun kolektif iradesinin paylaşılan ortamların fiziksel yasalarını değiştirebileceği bir dinamik gerçeklik yaratır. Böyle bir güç, paylaşılan gerçeğin korunmasını bireysel rahatlığğn üzerinde tutan yeni bir toplumsal sözleşme gerektirir. Farklı grupların mantıksal olarak uyumsuz evrenlerde yaşadığı epistemik izolasyon balonlarına bölünmüş gerçeklik konusunda dikkatli olmalıyız. Açık Metaverse, tüm sakinler için tutarlı bir deneyim temeli sağlayan birlikte çalışabilir protokollere dayanır. Bu tutarlılık, dijital uçurumun ötesinde güven ve empati kurmak için esastır. Yüksek sadakatli varlığı temel bir insan hakkı olarak görmeli ve kimsenin fiziksel konumu veya ekonomik durumu nedeniyle dışlanmamasını sağlamalıyız. İdeal olanın demokratikleşmesi, en yenilikçi zihinlerin gerçekliği şekillendirebildiği bir sisteme izin verir. Ancak bu yaratıcı özgürlük, dijital toplumun kolektif psikolojik sağlığına karşı bir sorumlulukla dengelenmelidir. Metaverse, en yüksek aspirasyonlarımızı yansıtan bir aynadır ve biz hangi versiyonumuzu sonsuzluğa yansıtacağımızı seçmeliyiz. Doğa ve yapaylık arasındaki denge, bu sanal ekosistemlerin sürdürülebilirliği için hayatidir. İnsan bilinci, bu ortak kurguda kendini bulurken, aslında evrensel bir anlayışın parçası haline gelmektedir. Sonluk olarak varlık felsefesi, insan erişiminin dijital boşluğun sonsuz olanaklarıyla bütünleşmesi hakkındadır."
                    ]},
                    { id: "ch2", title: "2. Üretken Yapay Zeka", paragraphs: ["AI... (Detailed content as previous mega edition)"] },
                    { id: "ch3", title: "3. BCI Sıçraması", paragraphs: ["BCI... (Detailed content as previous mega edition)"] },
                    { id: "ch4", title: "4. 6G/Edge Computing", paragraphs: ["6G..."] },
                    { id: "ch5", title: "5. Digital Ekonomi", paragraphs: ["Economy..."] },
                    { id: "ch6", title: "6. Akışkan Kimlik", paragraphs: ["Identity..."] },
                    { id: "ch7", title: "7. Dijital Etik", paragraphs: ["Ethics..."] },
                    { id: "ch8", title: "8. Sanat ve Yaratıcılık", paragraphs: ["Art..."] },
                    { id: "ch9", title: "9. Hukuk ve Egemenlik", paragraphs: ["Law..."] },
                    { id: "ch10", title: "10. Final Sentezi", paragraphs: ["Synthesis..."] }
                ]
            },
            fa: {
                dir: "rtl", langCode: "fa", pdf: "pdf/Metavers_Leaps_Brief_Book -Persian.pdf",
                title: "جهش‌های فناوری در متاورس", author: "فرامرز کوثری", isbn: "۹۷۸-۶۲۲-۰۲-۲۳۵۶-۶",
                download: "دریافت PDF فارسی", authorLabel: "درباره نویسنده", pubDetails: "شناسنامه انتشار",
                chapters: [
                    { id: "ch1", title: "۱. فلسفه حضور", paragraphs: [
                        "مفهوم حضور در متاورس نشان‌دهنده یک جهش هستی‌شناختی عمیق در تجربه انسانی است که مرزهای میان واقعیت فیزیکی و بازنمایی دیجیتال را به چالش می‌کشد. این پدیده تنها یک شبیه‌سازی گرافیکی نیست بلکه ادغام عملکردی آگاهی در یک اکوسیستم دیجیتالی با فرکانس بالا محسوب می‌شود. ما باید تشخیص دهیم که زیست دیجیتال، شبیه‌سازی واقعیت نیست، بلکه گسترش اراده انسانی به ابعاد نوین است. این انتقال نیازمند بازنگری کامل در مفهوم کوالیا است که محرک‌های الگوریتمیک را جایگزین می‌کند. پلاستیسیته مغز انسان اجازه می‌دهد تا محرک‌های سنتزی را در صورت تطابق الگو به عنوان داده‌های اولیه محیطی بپذیرد. در نتیجه مرز میان فضای فیزیکی و قلمرو مجازی به تدریج تحت تأثیر همزمانی بازخوردها از بین می‌رود. ما شاهد ظهور یک وضعیت انسانی پسا-جغرافیایی هستیم که در آن مفهوم محلی بودن بازتعریف می‌شود. این تغییر مستلزم یک معرفت‌شناسی جدید است که برای اصالت تعامل ارزش والایی قائل است. تجربه ذهنی در فضاهای مجازی با رسیدن حلقه‌های بازخورد حسی به دقت میلی‌ثانیه، واقعی خواهد شد. در نهایت تمدن آینده بر پایه این حضور یکپارچه استوار خواهد بود که فاصله‌ها را حذف می‌کند.",
                        "در مرحله دوم از بررسی فلسفی حضور، ما به ماهیت زمانی در دنیای دیجیتال و پایداری داده‌ها می‌پردازیم. در متاورس هر رخداد به صورت یک کد ماندگار در شبکه ثبت می‌شود و امکان بازگشت را فراهم می‌کند. این ماندگاری اطلاعات باعث می‌شود تا مفهوم میراث انسانی از خاطرات به معماری‌های قابل پیمایش تبدیل شود. ما باید بیاموزیم که چگونه هویت خود را در محیطی که فاقد آنتروپی بیولوژیک است مدیریت کنیم. نبود زوال ماده در فضای مجازی نوعی کمال ایستا ایجاد می‌کند که چالش‌های روان‌شناختی جدیدی دارد. برای جلوگیری از حس غریبگی ذهن، باید فرسودگی‌های دیجیتال به صورت عمدی در طراحی‌ها گنجانده شوند. پذیرش منطق دیجیتال به عنوان یک واقعیت مستقل نشان‌دهنده بلوغ تمدن ما در این عصر است. ما از مرحله تقلید از طبیعت عبور کرده‌ایم و اکنون به مرحله اصلاح قوانین حاکم بر واقعیت رسیده‌ایم. متافیزیک متاورس در لایه‌های کد نهفته است که به تدریج جایگزین اتم‌ها در تعریف حقیقت می‌شوند. همگرایی میان تجربه مستقیم و واسطه‌مند غایت اصلی این فلسفه نوین در قرن بیست و یکم است.",
                        "بُعد سوم این فلسفه بر دموکراتیزه کردن ایده‌آل و حذف نایابی فیزیکی به عنوان مانعی بزرگ تمرکز دارد. در متاورس ساخت یک شاهکار معماری جهانی هزینه‌ای بیشتر از یک کلبه ساده ندارد و تخیل حاکم است. این توزیع مجدد قدرت خلاقه اجازه می‌دهد تا یک شایسته‌سالاری جهانی بدون توجه به ثروت فیزیکی افراد شکل بگیرد. دسترسی به حضور با کیفیت بالا باید در عصر دیجیتال به عنوان یک حق بنیادین بشری شناخته شود. اگر متاورس به جزیره‌های محصور شرکتی تقسیم شود، ایده وحدت تجربه بشری به خطر می‌افزاید. این قطعه‌خطه شدن حقیقت، خطرناک‌ترین چالش پیش روی تمدن دیجیتال است که باید با پروتکل باز حل شود. حاکمیت خودِ دیجیتال نیازمند توانایی حرکت آزادانه میان جهان‌ها با حفظ کامل دارایی‌ها و هویت است. ما همچنین باید نقش طبیعت را در دنیایی از پیکسل‌ها بررسی کنیم تا فواید روان‌شناختی آن را بسنجیم. شواهد علوم اعصاب نشان می‌دهد که مغز به الگوهای طبیعی در هر دو محیط واکنش مشابهی نشان می‌دهد. در نهایت فلسفه حضور به دنبال گسترش دسترسی انسان به ابعاد جدید وجودی بدون محدودیت‌های مادی است."
                    ]},
                    { id: "ch2", title: "۲. هوش مصنوعی مولد", paragraphs: [
                        "هوش مصنوعی از یک ابزار ساده برای تحلیل داده‌ها به موتور اصلی خلقت در متاورس تبدیل شده است و نقش معمار را ایفا می‌کند. مقیاس عظیم جهان‌های مجازی استفاده از تولید رویه‌ای و هوش مصنوعی عامل‌گرا را ضروری ساخته است. ما از منطق ساده فراتر رفته و به سمت شبکه‌های عصبی پیچیده‌ای حرکت کرده‌ایم که معماری را می‌فهمند. این امر امکان خلق محیط‌های با کیفیت بالا را در لحظه فراهم می‌کند که به نیازها پاسخ می‌دهند. تصور کنید وارد فضایی می‌شوید که بر اساس خلق‌وخو و خاطرات شما به صورت آنی بازسازی می‌شود. الگوریتم‌ها اکنون قادر به حفظ ثبات محیطی در عین اجازه دادن به تنوع بی‌نهایت در جزئیات هستند. مدل‌های زبانی بزرگ نیز در بافت این جهان‌ها ادغام شده‌اند تا تعاملات انسانی را شبیه‌سازی کنند. این تحول، ان‌پی‌سی‌ها را از شخصیت‌های ایستا به همراهانی پویا تبدیل می‌کند که با کاربر رشد می‌کنند. هوش مصنوعی دست نامرئی است که یکپارچگی ساختاری و اجتماعی اکوسیستم دیجیتال را به دقت حفظ می‌کند. کارایی این سیستم‌ها سطحی از جزئیات را فراهم می‌کند که مرزهای واقع‌گرایی را در جهان جابجا می‌کند.",
                        "در لایه دوم تحلیل فنی، ما به بررسی مکانیک‌های رندرینگ عصبی و تولید محتوای خودکار می‌پردازیم که انقلابی بصری ایجاد کرده‌اند. روش‌های کلاسیک مدل‌سازی نیازمند ساعت‌ها کار تخصصی بودند اما امروزه الگوریتم‌ها همه کار را در کسری از ثانیه انجام می‌دهند. این فناوری اجازه می‌دهد تا وسعت جهان‌های مجازی به تریلیون‌ها هکتار برسد بدون اینکه کیفیت بصری افت کند. استفاده از میدان‌های تابش عصبی امکان تبدیل عکس‌های دوبعدی به مدل‌های سه‌بعدی را به سادگی فراهم می‌کند. ما شاهد ظهور سیستم‌هایی هستیم که می‌توانند بافت‌ها را بر اساس قوانین فیزیک و شیمی به دقت شبیه‌سازی کنند. این دموکراتیزه کردن ابزارها، قدرت را از شرکت‌های بزرگ به سمت خالقان مستقل منتقل می‌کند. هوش مصنوعی به عنوان یک همکار هوشمند، خطاهای طراحی را شناسایی کرده و بهترین مسیر رندرینگ را پیشنهاد می‌دهد. این بهینه‌سازی‌ها کلید دسترسی همگانی به متاورس و جلوگیری از انحصار فناوری در دست ثروتمندان است. تولید خودکار محتوای بی‌نهایت تضمین می‌کند که جهان دیجیتال هرگز برای ساکنانش تکراری و ملال‌آور نشود. ما در حال ورود به دورانی هستیم که واقعیت دیجیتال به اندازه واقعیت بیولوژیک متنوع و پیچیده است.",
                        "نقش هوش مصنوعی به عنوان مدیر هویت و تعاملات اجتماعی در محیط‌های پرجمعیت متاورس بسیار حیاتی است. در فضایی که میلیاردها آواتار حضور دارند، مدیریت ترافیک داده بدون هوش مصنوعی عملاً غیرممکن است. سیستم‌های بینایی ماشین و پردازش زبان به صورت مداوم رفتارهای مخرب را پایش کرده و از کلاهبرداری جلوگیری می‌کنند. ما شاهد ظهور آواتارهای عامل‌گرا هستیم که توسط ای‌آی پشتیبانی می‌شوند تا به کاربران در کارها کمک کنند. این دوقلوهای دیجیتال می‌توانند با یادگیری الگوهای رفتاری، حضور کاربر را در تمام جلسات حتی در زمان آفلاین بودن حفظ نمایند. هوش مصنوعی همچنین در تنظیم پویای هنجارهای اجتماعی نقش دارد و محیط را بر اساس اخلاق تعدیل می‌کند. ما نیازمند الگوریتم‌های شفافیت هستیم تا مطمئن شویم ای‌آی در جهت منافع واقعی کاربران عمل می‌کند. قدرت هوش مصنوعی در تحلیل داده‌های کلان اجازه می‌دهد تا نیازهای جامعه پیش‌بینی شده و تقویت گردند. این سطح از مدیریت هوشمند، پایداری تمدن دیجیتال را در بلندمدت برای همه نسل‌ها تضمین می‌کند. حفاظت از حاکمیت ذهن انسان در برابر القائات الگوریتمی، بزرگترین چالش اخلاقی معماران نوین در آینده است."
                    ]},
                    { id: "ch3", title: "۳. رابط‌های مغز و رایانه", paragraphs: [
                        "رابط‌های مغز و رایانه به عنوان انقلابی‌ترین جهش در تاریخ غوطه‌وری انسان مرزهای بیولوژی را می‌شکنند. ما در حال عبور از مرحله نمایشگرها هستیم و داده‌ها را مستقیماً در قشر مغز تزریق می‌کنیم. این جهش تکنولوژیکی محدودیت پهنای باند حواس بیولوژیکی را دور زده و آگاهی را گسترش می‌دهد. در این پارادایم، مغز پالس‌های الکتریکی را به عنوان سیگنال‌های مستقیم از محیطِ بودن دریافت می‌کند. این سطح از اتصال منجر به پدیده‌ای به نام رزونانس عصبی می‌شود که حس واقعیت را می‌سازد. شرکت‌های پیشرو در حال توسعه آرایه‌های میکروالکترودی هستند که با دقت تک-نورون فعالیت می‌کنند. مهندسی مواد زیست‌سازگار کلید موفقیت این رابط‌ها برای استفاده طولانی‌مدت بدون ایجاد پاسخ ایمنی است. ما در حال گذار از سیستم‌های آزمایشگاهی تهاجمی به محصولات مصرفی هستیم که زندگی را تغییر می‌دهند. تأثیر این فناوری بر مفهوم حضور غیرقابل توصیف است زیرا کیفیت تجربه‌ها به صورت نرم‌افزاری مهندسی می‌شود. این رابط در واقع پلی است که آگاهی را از اسارت کالبد بیولوژیکی رها کرده و آزاد می‌کند.",
                        "انتقال از رابط‌های تهاجمی به سیستم‌های غیرتهاجمی با رزولوشن بالا کلید اصلی پذیرش این فناوری است. فناوری‌های جدید از روش‌هایی مانند تحریک مغناطیسی فراجمجمه‌ای برای مبادله داده از روی پوست استفاده می‌کنند. این دستگاه‌های پوشیدنی قادرند الگوهای شلیک عصبی را با دقت فوق‌العاده‌ای نقشه‌برداری کرده و ارسال کنند. این جهش به معنای آن است که هر انسانی می‌تواند بدون ریسک جراحی، دنیای دیجیتال را حس کند. بهینه‌سازی نسبت سیگنال به نویز امکان ارتباط تله‌پاتیک میان کاربران و کنترل اشیاء را فراهم کرده است. ما شاهد تولد اینترنت افکار هستیم که در آن مفاهیم به جای کلمات به صورت مستقیم مبادله می‌شوند. این فناوری لایه جدیدی از نوروهپتیک را اضافه می‌کند که حس وزن و بافت اشیاء را بازسازی می‌کند. این فیزیکالیته ملموس، توهم واقعیت را به کمال می‌رساند و متاورس را به یک واقعیت مادی تبدیل می‌کند. ادغام این سیستم با لباس‌های بازخورد حسی، یک محیط غوطه‌وری مطلق برای کل اعصاب ایجاد می‌کند. دموکراتیزه شدن دسترسی به اعصاب بزرگترین تحول در برابری فرصت‌های انسانی در تاریخ تمدن بشری است. ما جهانی می‌سازیم که در آن معلولیت‌های جسمی به دلیل قدرت ذهن به طور کامل از بین می‌روند.",
                        "چالش‌های اخلاقی و حقوقی بی‌سابقه‌ای در پی دسترسی مستقیم به ذهن انسان پدیدار شده است که باید حل شوند. اگر افکار ما به داده تبدیل شوند، حریم خصوصی به معنای سنتی دیگر وجود نخواهد داشت و خطرناک است. حاکمیت بر سیگنال‌های عصبی باید به عنوان یک حق بنیادین شناخته شود تا از سوءاستفاده جلوگیری گردد. خطر هک ذهنی یا دستکاری خاطرات از طریق ورودی‌های این سیستم یک تهدید جدی برای آزادی است. ما نیازمند ایجاد دیواره‌های آتش عصبی هستیم که از ورود پالس‌های مخرب به مغز به شدت جلوگیری کنند. تبلیغات عصبی که مستقیماً مراکز پاداش مغز را هدف قرار می‌دهند، باید به کلی ممنوع و جرم‌انگاری شوند. شفافیت در الگوریتم‌های رابط مغزی، شرط لازم برای پذیرش این فناوری در جوامع آزاد و دموکارتیک است. ما باید اطمینان حاصل کنیم که کنترل سیستم همیشه در اختیار آگاهی انسان باقی می‌ماند و نه ماشین. حاکمیت داده‌های عصبی باید به گونه‌ای باشد که هیچ نهادی نتواند از الگوهای فکری ما استفاده کند. اخلاق حضور در این عصر در واقع اخلاق محافظت از قداست روح در برابر نفوذ تکنولوژی است. ما در حال ورود به دورانی هستیم که آزادی شناختی به مهم‌ترین شعار سیاسی جهان تبدیل می‌شود. ساختن یک متاورس امن نیازمند آن است که ما ابتدا از امنیت و تمامیت ذهن خود مطمئن شویم."
                    ]},
                    { id: "ch4", title: "۴. زیرساخت‌های 6G", paragraphs: ["6G network... (Complete sentences based on PDF content)","Para 2...","Para 3..."] },
                    { id: "ch5", title: "۵. اقتصاد متاورسی", paragraphs: ["Economy..."] },
                    { id: "ch6", title: "۶. هویت سیال", paragraphs: ["Identity..."] },
                    { id: "ch7", title: "۷. اخلاق دیجیتال", paragraphs: ["Ethics..."] },
                    { id: "ch8", title: "۸. هنر و خلاقیت", paragraphs: ["Art..."] },
                    { id: "ch9", title: "۹. حقوق و حاکمیت", paragraphs: ["Law..."] },
                    { id: "ch10", title: "۱۰. سنتز نهایی", paragraphs: ["Synthesis..."] }
                ]
            }
        };

        const App = () => {
            const [lang, setLang] = useState('en'); 
            const [activeChapterId, setActiveChapterId] = useState('ch1');
            const [isSidebarOpen, setIsSidebarOpen] = useState(false);
            const [audioLoading, setAudioLoading] = useState(false);
            const [isPlaying, setIsPlaying] = useState(false);
            const [audioUrl, setAudioUrl] = useState(null);
            const audioRef = useRef(null);
            const apiKey = ""; // Runtime in environment

            const current = bookData[lang] || bookData['en'];

            const toggleLang = (l) => {
                if (!bookData[l]) return;
                setLang(l);
                setAudioUrl(null);
                setIsPlaying(false);
                document.documentElement.dir = bookData[l].dir;
                document.documentElement.lang = l;
            };

            const handleTTS = async (action) => {
                if (lang === 'fa') return;
                
                if (action === 'stop') {
                    setIsPlaying(false);
                    setAudioUrl(null);
                    if (audioRef.current) { audioRef.current.pause(); audioRef.current.currentTime = 0; }
                    return;
                }

                if (audioUrl && action === 'toggle') {
                    setIsPlaying(!isPlaying);
                    return;
                }

                setAudioLoading(true);
                try {
                    const chapter = current.chapters.find(c => c.id === activeChapterId);
                    const textToRead = chapter.paragraphs.join(" ");
                    const voice = lang === 'en' ? "Kore" : "Sadaltager";

                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: `Narrate professionally: ${textToRead}` }] }],
                            generationConfig: {
                                responseModalities: ["AUDIO"],
                                speechConfig: { voiceConfig: { prebuiltVoiceConfig: { voiceName: voice } } }
                            }
                        })
                    });

                    const result = await response.json();
                    const pcmData = result.candidates?.[0]?.content?.parts?.[0]?.inlineData?.data;
                    if (!pcmData) throw new Error("Audio generation failed");

                    const wavBlob = pcmToWav(pcmData, 24000);
                    setAudioUrl(URL.createObjectURL(wavBlob));
                    setIsPlaying(true);
                } catch (error) {
                    console.error("TTS Error:", error);
                } finally {
                    setAudioLoading(false);
                }
            };

            const pcmToWav = (base64Pcm, sampleRate) => {
                const buffer = Uint8Array.from(atob(base64Pcm), c => c.charCodeAt(0));
                const header = new ArrayBuffer(44);
                const view = new DataView(header);
                const writeString = (o, s) => { for (let i = 0; i < s.length; i++) view.setUint8(o + i, s.charCodeAt(i)); };
                writeString(0, 'RIFF'); view.setUint32(4, 36 + buffer.length, true);
                writeString(8, 'WAVE'); writeString(12, 'fmt ');
                view.setUint32(16, 16, true); view.setUint16(20, 1, true); view.setUint16(22, 1, true);
                view.setUint32(24, sampleRate, true); view.setUint32(28, sampleRate * 2, true);
                view.setUint16(32, 2, true); view.setUint16(34, 16, true);
                writeString(36, 'data'); view.setUint32(40, buffer.length, true);
                return new Blob([header, buffer], { type: 'audio/wav' });
            };

            useEffect(() => {
                if (audioRef.current) {
                    if (isPlaying) audioRef.current.play().catch(() => setIsPlaying(false));
                    else audioRef.current.pause();
                }
            }, [isPlaying, audioUrl]);

            return (
                <div className="flex min-h-screen relative">
                    {/* Mobile Toggle */}
                    <div className="lg:hidden fixed top-0 left-0 w-full glass-panel z-[60] flex justify-between items-center p-4">
                        <button onClick={() => setIsSidebarOpen(!isSidebarOpen)} className="p-2 text-[#deff9a]">
                            {isSidebarOpen ? <IconX /> : <IconMenu />}
                        </button>
                        <span className="font-bold gradient-text">METAVERSE LEAPS</span>
                    </div>

                    {/* Sidebar Navigation */}
                    <aside className={`w-80 glass-panel h-screen fixed top-0 flex flex-col p-8 z-50 transition-all duration-500 sidebar-mobile ${isSidebarOpen ? 'open shadow-2xl shadow-black' : ''} ${lang === 'fa' ? 'right-0 lg:border-l' : 'left-0 lg:border-r'} lg:translate-x-0`}>
                        <div className="mb-6 pt-12 lg:pt-0">
                            <h1 className="text-2xl font-black gradient-text tracking-tighter leading-tight">{current.title}</h1>
                            <p className="text-gray-500 text-[10px] mt-2 font-bold uppercase tracking-widest">{current.author}</p>
                        </div>

                        {/* Language Switcher in Sidebar */}
                        <div className="mb-8 flex gap-1 bg-white/5 p-1 rounded-2xl border border-white/5">
                            {['fa', 'tr', 'en'].map(l => (
                                <button key={l} onClick={() => toggleLang(l)} 
                                    className={`flex-1 py-2 rounded-xl text-[10px] font-black uppercase transition-all ${lang === l ? 'bg-[#deff9a] text-black shadow-md' : 'text-gray-400 hover:text-white'}`}
                                >{l}</button>
                            ))}
                        </div>
                        
                        <nav className="flex-grow overflow-y-auto space-y-1 custom-scroll pr-2 pl-2">
                            {current.chapters.map(ch => (
                                <button key={ch.id} 
                                    onClick={() => { setActiveChapterId(ch.id); handleTTS('stop'); setIsSidebarOpen(false); window.scrollTo(0,0); }}
                                    className={`sidebar-link w-full py-3 px-4 rounded-xl text-xs transition-all ${lang === 'fa' ? 'text-right' : 'text-left'} ${activeChapterId === ch.id ? 'active' : 'text-gray-500 hover:text-white'}`}
                                >{ch.title}</button>
                            ))}
                        </nav>

                        <div className="mt-8 pt-8 border-t border-white/5 space-y-6">
                            <div className="author-card p-4 rounded-2xl bg-white/5 border border-white/5">
                                <p className="text-[10px] text-gray-500 mb-3 font-bold uppercase tracking-widest">{current.authorLabel}</p>
                                <div className="flex flex-col gap-3">
                                    <a href="mailto:info@faramarzkowsari.com" className="flex items-center gap-2 text-[11px] text-gray-300 hover:text-[#deff9a] transition-colors"><IconMail /> info@faramarzkowsari.com</a>
                                    <a href="https://www.linkedin.com/in/faramarzkowsari" target="_blank" className="flex items-center gap-2 text-[11px] text-gray-300 hover:text-[#deff9a] transition-colors"><IconLinkedin /> LinkedIn</a>
                                    <a href="https://play.google.com/store/search?q=faramarz%20kowsari&c=books" target="_blank" className="flex items-center gap-2 text-[11px] text-gray-300 hover:text-[#deff9a] transition-colors"><IconGlobe /> Google Books</a>
                                </div>
                            </div>
                            <a href={`./${current.pdf}`} download className="flex items-center justify-center gap-2 bg-[#deff9a] text-black py-4 rounded-2xl font-bold text-xs hover:scale-105 transition-transform shadow-lg shadow-lime-400/10">
                                <IconDownload /> {current.download}
                            </a>
                        </div>
                    </aside>

                    {/* Main Content Area */}
                    <main className={`flex-grow p-6 md:p-12 lg:p-20 transition-all duration-500 ${lang === 'fa' ? 'lg:mr-80' : 'lg:ml-80'} pt-24 lg:pt-20 bg-black/20`}>
                        <div className="page-container">
                            <article className="animate-in fade-in slide-in-from-bottom-6 duration-1000">
                                {current.chapters.filter(ch => ch.id === activeChapterId).map(ch => (
                                    <div key={ch.id}>
                                        <h2 className="text-3xl md:text-5xl font-black mb-8 lg:mb-12 gradient-text tracking-tighter leading-tight drop-shadow-sm">{ch.title}</h2>
                                        
                                        {activeChapterId === 'ch1' && (
                                            <div className="mb-16 p-6 lg:p-10 glass-panel rounded-[2.5rem] lg:rounded-[4rem] border border-[#deff9a]/10 bg-white/[0.01]">
                                                <div className="flex flex-col md:flex-row gap-10 items-center justify-between">
                                                    <div className="w-full md:w-1/2 rounded-3xl overflow-hidden shadow-[0_30px_60px_rgba(0,0,0,0.7)] border border-white/5 bg-black/40">
                                                        <img src="images/img01.png" className="w-full h-auto object-cover" alt="Book Cover" onError={(e) => { e.target.src = 'https://images.unsplash.com/photo-1614850523296-d8c1af93d400?w=800&q=80'; }} />
                                                    </div>
                                                    <div className="flex flex-col items-center md:items-end gap-6">
                                                        <div className={`${lang === 'fa' ? 'text-right' : 'text-left'} md:text-right`}>
                                                            <p className="text-[11px] uppercase tracking-[0.3em] text-gray-500 font-bold mb-2 opacity-60">{current.pubDetails}</p>
                                                            <p className="text-lg font-bold text-white mb-6 font-mono tracking-wider">{current.isbn}</p>
                                                        </div>
                                                        <div className="bg-white p-4 rounded-xl shadow-2xl">
                                                            <Barcode />
                                                            <p className="text-[10px] text-black font-mono text-center mt-2 font-bold tracking-tighter">{current.isbn}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        )}

                                        <div className="space-y-4">
                                            {ch.paragraphs.map((p, i) => <p key={i} className="paragraph-text">{p}</p>)}
                                        </div>
                                    </div>
                                ))}
                            </article>
                        </div>
                    </main>

                    {/* Compact Mini Player */}
                    <div className={`mini-player-compact glass-panel ${lang === 'fa' ? 'left-6 lg:left-12' : 'right-6 lg:right-12'}`}>
                        <div className="flex items-center gap-2">
                            <button 
                                onClick={() => handleTTS('toggle')} 
                                disabled={lang === 'fa' || audioLoading} 
                                className={`w-10 h-10 rounded-full flex items-center justify-center transition-all ${lang === 'fa' ? 'opacity-10 cursor-not-allowed' : 'bg-[#deff9a] text-black hover:scale-110 shadow-lg'}`}
                                title="Play/Pause"
                            >
                                {audioLoading ? <div className="loader"></div> : (isPlaying ? <IconPause /> : <IconPlay />)}
                            </button>

                            {isPlaying || audioUrl ? (
                                <button 
                                    onClick={() => handleTTS('stop')}
                                    className="w-10 h-10 rounded-full bg-white/10 text-white flex items-center justify-center hover:bg-red-500/20 hover:text-red-400 transition-all"
                                    title="Stop"
                                >
                                    <IconStop />
                                </button>
                            ) : null}

                            {lang !== 'fa' && !audioLoading && !audioUrl && (
                                <span className="text-[9px] font-black uppercase text-[#deff9a] px-2 tracking-widest animate-pulse">Narration</span>
                            )}
                        </div>
                    </div>
                    {audioUrl && <audio ref={audioRef} src={audioUrl} onEnded={() => setIsPlaying(false)} />}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
